$color-primary: #FF5722
$color-link: #E91E63
$color-secondary-text: #727272
$color-filepreview-top: darken($color-primary, 20%)

.icon
  display: inline-block
  width: 1em
  height: 1em
  stroke-width: 0
  stroke: currentColor
  fill: currentColor

body > .loading
  display: none

body
  background-color: white
  font-size: 16px
  color: #212121
  cursor: default
  min-width: 200px
  margin: 0
  font-family: sans-serif
  *
    box-sizing: border-box
    overflow-wrap: break-word
    word-wrap: break-word

.schsrch
  min-width: 200px
  noscript
    display: block
    text-align: center
    padding: 2rem
    background-color: #FF5722
    color: white
    a
      color: white
      font-weight: bold
  noscript.small
    padding: 0.5rem
  > .content,
  > .contentblackcover,
  > .feedback,
    position: absolute
    top: 0
    left: 0
    width: 100%
    height: 100%
    min-width: 200px
  > .content // This thing is 100%wh absolute positioned and will contain all main content. (i.e. not feedback dialog and it's back cover)
    overflow-x: hidden
    overflow-y: auto
    z-index: 1
    display: flex
    flex-wrap: nowrap
    flex-direction: column
    noscript
      flex-grow: 0
      flex-shrink: 1
    > .viewcontain
      // Contain all views:
      //   .view-home
      //   .view-search
      //   .view-search + .filepreview (side pane)
      flex-grow: 1
      flex-shrink: 1
      max-height: 100vh
      display: flex
      flex-wrap: nowrap
      flex-direction: row
      align-items: stretch
      > .view
        flex-grow: 1
        flex-shrink: 1
        max-width: 100%
        > .prepare-shadow
          transition: box-shadow 200ms
          will-change: box-shadow
        > .shadow
          box-shadow: 0 2px 2px rgba(black, 0.3)
          z-index: 10
      > .filepreview
        flex-grow: 1
        flex-shrink: 1
        border-left: solid 2px $color-primary
    > .viewcontain.sidepane
      > .view
        flex-grow: 0
        flex-shrink: 0
        width: 500px

.contentblackcover
  z-index: 2
  background-color: rgba(black, 0.5)
  transition: opacity 600ms
  will-change: opacity
  opacity: 0
  pointer-events: none

.searchbar
  .bannerContain
    transition: all 100ms
    .banner
      transition: all 100ms
      color: $color-primary
  .bannerContain.hide
    margin-left: 0.5rem !important
    .banner
      width: 0 !important
  .inputContain
    $inputFontSize: 1.3rem
    $inputLineHeight: 1.8
    position: relative
    transition: all 100ms
    .querybox
      border: none
      outline: none
    .querybox, .stroke, .inputPositionWrap
      transition: all 100ms
    .inputPositionWrap
      position: relative
      display: -webkit-flex
      -webkit-flex-direction: row
      -webkit-flex-wrap: nowrap
      -webkit-align-items: flex-end
      display: flex
      flex-direction: row
      flex-wrap: nowrap
      align-items: flex-end
      margin-left: auto
      margin-right: auto
      height: $inputFontSize * $inputLineHeight
      .placeholder
        position: absolute
        top: 0
        left: 0
        width: 100%
      .querybox .placeholder
        height: 100%
      .querybox
        -webkit-flex: 1
        flex: 1
      .stroke
        position: absolute
        z-index: 2
        height: 2px
        bottom: 0
        left: 0
        right: 0
        background-color: lighten($color-primary, 30%)
        overflow: hidden
        .fill
          height: 2px
          background-color: $color-primary
      .rightWrap
        padding-top: 0.3rem
        padding-left: 0.5rem
        padding-right: 0.5rem
        background-color: rgba(white, 0.7)
        z-index: 1
        -webkit-flex: content
        flex: content
        .clearInput
          display: inline-block
          cursor: pointer
          margin-top: -0.3rem
          margin-left: -0.5rem
          margin-right: -0.5rem
          padding-top: 0.3rem
          padding-left: 0.5rem
          padding-right: 0.5rem
          padding-bottom: 0.5rem
          .icon
            vertical-align: middle
            line-height: 0
            color: $color-primary
    .querybox, .placeholder
      color: $color-primary
      display: inline-block
      font-size: $inputFontSize
      line-height: $inputLineHeight
    .querybox
      &::placeholder,
      &::-webkit-input-placeholder,
      &::-moz-placeholder,
      &:-ms-input-placeholder
        color: $color-primary
    .querybox.border
      border-bottom: 2px $color-primary solid
    .subjecthints
      background-color: white
      .subject
        background-color: white
        transition: background-color 200ms
        padding: 0.3rem 1rem
        .level, .id
          font-size: 50%
          color: $color-secondary-text
      .subject:hover, .subject.select
        background-color: darken(white, 10%)

.searchbar.big
  .bannerContain
    display: block
    text-align: center
    margin-top: 20vh
    .banner
      display: inline-block
      max-width: 70%
  .inputContain
    display: block
    text-align: center
    margin-top: 1rem
    .inputPositionWrap, .subjecthints
      width: 90%
    .querybox, .placeholder
      text-align: center
    .placeholder
      color: lighten($color-primary, 30%)
      cursor: text
      pointer-events: none
      opacity: 1
      transition: opacity 200ms
    .placeholder.hide
      opacity: 0
    .subjecthints
      margin-left: auto
      margin-right: auto
.searchbar.small
  flex-shrink: 0
  margin: 0
  padding-top: 0.5rem
  display: flex
  flex-direction: row
  flex-wrap: nowrap
  align-items: center
  .bannerContain
    margin-left: 1rem
    .banner
      display: block
      height: 35px
  .inputContain
    flex-grow: 1
    margin-left: 1.5rem
    .querybox
      text-align: left
    .inputPositionWrap, .subjecthints
      width: 100%
    .subjecthints
      position: absolute
  .inputContain.hidebanner
    margin-left: 0
    .inputPositionWrap, .subjecthints
      width: 90%

.schsrch .home-desc
  margin-top: 3rem
  text-align: center
  font-size: 1rem
  .links
    margin-bottom: 2rem
    a
      color: $color-link
      margin-left: 1rem
      margin-right: 1rem
      cursor: pointer
      text-decoration: none
      display: inline-block
      line-height: 1.5
  .status
    font-size: 0.8rem
    color: lighten($color-primary, 10%)
    padding-left: 0.5rem
    padding-right: 0.5rem
    .large
      font-size: 1rem
      color: lighten($color-primary, 5%)
    .hr
      border-bottom: solid 1px $color-primary
      margin-left: 15%
      margin-right: 15%
      height: 0
    .error
      color: red
    .reload span
      color: $color-link
      line-height: 2
      padding: 0.5rem 2rem
      cursor: pointer
      font-size: 0.7rem
    .error, .reload
      font-size: 0.75rem
    div
      margin-bottom: 0.6rem
    span
      display: inline-block
    a
      color: $color-link
      border-bottom: solid 1px $color-link
      transition: color 200ms
      text-decoration: none
      &:hover
        color: darken($color-link, 20%)
  .status.loading
    opacity: 0.5

.errorbox
  padding: 1rem 2rem
  color: $color-primary
  .msg
    color: red
  .retry
    cursor: pointer
    color: white
    display: inline-block
    width: 10rem
    text-align: center
    padding: 0.5rem 0.5rem
    margin: 1rem
    background-color: $color-primary

.schsrch .view-search
  display: flex
  flex-direction: column
  flex-wrap: nowrap
  .searchcontain
    flex-grow: 1
    overflow-y: auto
  .fbBtn
    display: block
    color: $color-link
    border-top: solid 2px $color-primary
    padding: 0.5rem 1rem
    display: inline-block
    transition: background-color 200ms
    cursor: pointer
    -webkit-tap-highlight-color: transparent
  .fbBtn:active
    background-color: rgba($color-primary, 0.2)

.searchresult.loading
  opacity: 0.5
  pointer-events: none
.searchresult
  .overflow
    padding: 1rem 2rem
    cursor: auto
    .subject
      color: $color-secondary-text
      font-size: 80%
    pre, p
      margin: 0.5rem 0
      padding: 0
    .time, pre
      color: $color-primary
  .empty
    padding: 3rem 5rem
  .error
    @extend .errorbox
  .set, .filepreview
    margin-top: 0.5rem
    margin-bottom: 0.3rem
  .set
    padding: 0 0 0.5rem 0
    background-color: rgba($color-primary, 0.05)
    .setname
      padding: 0.5rem 1rem 
      background-color: rgba($color-primary, 0.1)
      font-size: 1rem
      color: $color-secondary-text
      .time, .paper, .variant
        color: $color-primary
        font-size: 1.3rem
        display: inline-block
      .paper.meta
        color: $color-secondary-text !important
        font-size: 1rem !important
      .subject
        .level
          font-size: 60%
          vertical-align: middle
    a
      color: inherit
    .files
      padding-top: 1rem
      .file
        padding: 0.3rem 1rem
    .related
      padding-top: 0.5rem
      padding-left: 2rem
      padding-right: 2rem
      .file
        padding: 0.1rem 0.5rem
    .files, .related
      padding-left: 1rem
      padding-right: 1rem
      color: $color-secondary-text
    .file
      cursor: pointer
      .typename
        color: $color-link
        font-size: 110%
        margin-right: 1rem
      .desc
        font-size: 90%
    .file.first
      padding: 1rem 1rem 0.5rem 1rem
      .foundon
        color: $color-primary
      .indexcontent
        font-size: 80%
        margin-top: 0.5rem
        color: $color-secondary-text
        .highlight
          color: $color-primary
  .filepreview
    width: 100%
    height: 90vh
  .searchprompt
    padding-left: 0.5rem
    padding-right: 0.5rem

  .warning
    border-top: 2px solid $color-link
    background-color: lighten($color-primary, 40%)
    text-align: left
    padding: 0.5rem 1rem
    margin-top: 0.5rem
    margin-bottom: 0.5rem
    a
      color: $color-link
      cursor: pointer
      transition: color 200ms
      &:hover
        color: darken($color-link, 20%)
        border-bottom: solid 1px rgba($color-secondary-text, 0.2)
.searchresult.smallsetname
  .set
    .setname
      font-size: 0.9rem
      .time, .paper, .variant
        color: $color-primary
        font-size: 0.9rem
        display: inline-block
    .typename
      font-size: 1rem
    .related
      padding-top: 0.5rem
      padding-left: 1rem
      font-size: 0.9rem
      .file
        padding: 0.1rem 0.5rem

.searchprompt
  color: $color-primary
  line-height: 1.5
  font-size: 0.8rem
  .error
    color: red
  a
    color: $color-link
    cursor: pointer
    &:hover
      color: lighten($color-link, 20%)

.sidepane .view-search .searchresult
  .set.current-previewing
    background-color: rgba(#aaa, 0.1)
    border-right: solid 2px $color-primary

$feedback-top-height: 2rem + 1.3rem
.feedback.hide
  visibility: hidden
.feedback
  z-index: 3
  background-color: white
  padding: 0
  .top
    background-color: $color-primary
    color: white
    font-size: 1.3rem
    line-height: 1.3rem
    height: $feedback-top-height
    position: absolute
    left: 0
    right: 0
    top: 0
    padding: 1rem 2rem
    box-shadow: 0 0 4px #000
    .close
      vertical-align: middle
      font-size: 0.9rem
      opacity: 0.9
      transition: background-color 200ms
      padding: 0.5rem
    .close:active
      background-color: rgba(white, 0.2)
  > .content
    position: absolute
    left: 0
    right: 0
    top: $feedback-top-height
    bottom: 0
    padding: 2.3rem
    overflow: auto
    h2
      font-size: 1.3rem
      margin: 0
      line-height: 1.3
      font-weight: normal
      color: $color-primary
    .email, textarea
      width: 100%
      outline: none
      border-top: none
      border-left: none
      border-right: none
      font-size: 0.9rem
    textarea
      height: 4rem
      resize: vertical
      max-height: 50vh
      border-bottom: solid 2px $color-primary
    textarea:disabled
      opacity: 0.5
      background: none
    .email
      border-bottom: solid 1px $color-primary
    .submit
      padding: 0.5rem 1rem
      background-color: $color-primary
      color: white
      font-size: 1rem
      margin: 0.5rem 0
      box-shadow: 0 2px 2px rgba(#000, 0.4)
      display: inline-block
      transition: background-color 200ms
    .submit:active
      background-color: lighten($color-primary, 15%)
    .submitting, .error
      font-size: 0.8rem
      margin: 0.5rem 0
    .submitting
      color: $color-primary
    .error
      color: red
    .searchReport
      color: $color-primary
      font-size: 1.2rem

.filepreview
  color: white
  display: flex
  flex-direction: column
  flex-wrap: nowrap
  background-color: white
  .loading, .error
    padding: 1rem 2rem
    flex-grow: 0
    flex-shrink: 0
  .loading, .error, .top
    background-color: $color-filepreview-top
  .top
    text-align: center
    font-size: 1rem
    line-height: 2
    flex-grow: 0
    flex-shrink: 0
    display: flex
    justify-content: center
    flex-direction: row
    align-items: center
    > *
      flex-shrink: 0
      flex-grow: 0
    .page
      display: inline-block
      .icon
        vertical-align: middle
        line-height: 0
      .input
        display: inline
        text-align: center
        width: 2rem
        background-color: transparent
        border-top: 0
        border-left: 0
        border-right: 0
        border-bottom: solid 1px white
        outline: none
        &::-webkit-inner-spin-button
          appearance: none
          -moz-appearance: none
          -webkit-appearance: none
        color: inherit
        font: inherit
        line-height: 1
        vertical-align: middle
    .dir, .download, .close, .prev, .next
      margin-left: 1rem
      cursor: pointer
      vertical-align: middle
      line-height: 0
    .prev.disabled, .next.disabled
      opacity: 0.5
    .prev
      margin-right: 1rem
  .error
    @extend .errorbox
    color: $color-primary
    background-color: white
  .error, .loading
    .download
      color: $color-primary
      cursor: pointer
  .error
    .download
      padding-left: 1.2rem
  .pdfview
    flex-grow: 1
    flex-shrink: 1
    background-color: white
    display: flex
    position: relative
    flex-direction: column
    flex-wrap: nowrap
    overflow: hidden
    background-color: white
    > .hide
      display: none
    > .show
      flex-grow: 1
      flex-shrink: 1
    > .dircontain
      flex-grow: 1
      flex-shrink: 1
      overflow: auto
  .pdfview.dirty
    opacity: 0.3
  .sspdfview
    position: absolute
    .questionln
      background-color: rgba($color-primary, 0.1)
      cursor: pointer
    .questionln.highlight
      background-color: rgba($color-link, 0.2)

.sspdfview
  background-color: white
  overflow: hidden
  width: 100%
  position: relative
  .svglayer, .selectlayer, .dirtylayer, .pointereventcover, .msref
    position: absolute
    top: 0
    right: 0
    bottom: 0
    left: 0
  .svglayer
    z-index: 2
    background-size: contain
    background-repeat: no-repeat
    background-position: center
    will-change: background-size, background-position
  .dirtylayer
    z-index: 1
    pointer-events: none
  .selectlayer
    z-index: 0
  .pointereventcover
    z-index: 3
    color: black
    font-size: 1.2rem

.disclaimer
  padding: 1.5rem
  .back
    display: inline-block
    padding: 0.5rem 0.7rem
    margin-right: 0.5rem
    vertical-align: middle
    background-color: transparent
    transition: background-color 200ms
    &:active
      background-color: rgba($color-primary, 0.2)
  a
    color: $color-link
    text-decoration: none
    &.back
      color: inherit
  h1
    display: inline-block
    vertical-align: middle
    font-size: 1.3rem
    margin: 0
    padding: 0
    line-height: 1.3
    font-weight: normal
    color: $color-primary
  .tldr
    font-size: 1rem
    color: $color-primary
    margin-top: 0.5rem
    padding: 0 1rem
  ul
    margin: 0
    padding: 0.5rem 1rem
    cursor: auto
    list-style-type: none
    li
      margin: 0.5rem 0
      &::before
        content: '・'
        margin-left: -1em
        color: $color-primary

.docdirlist
  color: black
  .msg
    padding: 0.5rem 1rem
    color: $color-primary
    font-size: 1rem
  ul
    list-style-type: none
    padding: 0
    margin: 0
    li
      cursor: pointer
      margin: 0
      padding: 0.5rem
      line-height: 1.2
      font-size: 1rem
      .qn
        text-align: right
        min-width: 3rem
        display: inline-block
        padding-right: 0.25rem
        margin-right: 0.5rem
        border-right: solid 1px #aaa
        color: $color-primary
        span
          color: #aaa
          font-size: 75%
      .page
        color: #aaa
        font-size: 75%
